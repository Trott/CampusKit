var ucsf=ucsf||{};ucsf.ctsiProfile={renderProfile:function(t){"use strict";if(t.hasOwnProperty("Profiles")&&t.Profiles instanceof Array&&t.Profiles.length>0){var e,i,n,r,o,s,a,c,l,u,d,h,p,f,m,g,v,k,C,y,E,w,b,S=t.Profiles[0],T=document.getElementById("ctsi-menu"),I=document.getElementById("ctsi-header");if(S.hasOwnProperty("Name")){I.innerHTML=S.Name;if(S.hasOwnProperty("PhotoURL")){i=document.createElement("img");i.setAttribute("src","http://src.sencha.io/80/80/"+S.PhotoURL);i.setAttribute("alt","");i.setAttribute("style","border-top-right-radius:0;border-bottom-left-radius:.5em;float:left");n=I.clientHeight;I.setAttribute("style","height:52px;padding-top:20px");T.insertBefore(i,I)}}if(S.hasOwnProperty("Narrative")&&"string"==typeof S.Narrative){e=document.createElement("ol");T.appendChild(e);r=document.createElement("li");o=document.createElement("a");o.setAttribute("href","#");o.setAttribute("onclick","ucsf.ctsiProfile.toggleNarrative(); return false;");s=document.createElement("span");s.setAttribute("class","smallprint");s.setAttribute("id","ctsi-narrative");a=S.Narrative.substring(0,S.Narrative.substring(0,200).lastIndexOf(" "));s.innerHTML=a+"...";document.getElementById("ctsi-narrative-hidden").innerHTML=S.Narrative;o.appendChild(s);r.appendChild(o);e.appendChild(r);i.setAttribute("style","border-top-right-radius:0;float:left")}if(S.hasOwnProperty("Keywords")&&S.Keywords.length>0){c=S.Keywords;l=document.createElement("ol");u=c.length>5?5:c.length;for(d=0;u>d;d+=1){h=document.createElement("li");h.innerHTML=c[d];l.appendChild(h)}p=document.getElementById("ctsi-keywords");p.innerHTML='<h1 class="content-first light">Research Interests</h1>';p.appendChild(l)}if(S.hasOwnProperty("Publications")&&S.Publications.length>0){f=S.Publications;m=document.createElement("ol");g=f.length>5?5:f.length;for(v=0;g>v;v+=1)if(f[v].hasOwnProperty("PublicationTitle")){k=document.createElement("li");C=document.createElement("span");C.setAttribute("class","smallprint");C.innerHTML=f[v].PublicationTitle;if(f[v].hasOwnProperty("PublicationSource")&&f[v].PublicationSource[0].hasOwnProperty("PublicationSourceURL")&&f[v].PublicationSource[0].PublicationSourceURL.length>0){y=document.createElement("a");y.setAttribute("href",f[v].PublicationSource[0].PublicationSourceURL);y.setAttribute("rel","external")}else y=document.createElement("p");y.appendChild(C);k.appendChild(y);m.appendChild(k)}E=document.getElementById("ctsi-publications");E.innerHTML='<h1 class="content-first light">Recent Publications</h1>';E.appendChild(m)}if(S.hasOwnProperty("ProfilesURL")){w=document.createElement("li");b=document.createElement("a");b.innerHTML="Full Research Profile";b.setAttribute("rel","external");b.setAttribute("href",S.ProfilesURL);document.getElementById("ctsi-full-profile");w.appendChild(b);document.getElementById("ctsi-full-profile").appendChild(w)}}},toggleNarrative:function(){"use strict";var t=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML;document.getElementById("ctsi-narrative-hidden").innerHTML=t}};window.location.search&&(window.onload=function(){"use strict";var t,e,i=decodeURIComponent(window.location.search),n=i.match(/[&?]fno=([\w.@]+)/);if(null!==n){t=n[1];e=document.createElement("script");e.src="http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+t+"&callback=ucsf.ctsiProfile.renderProfile&publications=full&mobile=on";document.body.appendChild(e)}});