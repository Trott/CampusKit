<progress data-ng-show="loading"><div class="spinner"></div></progress>
<div data-ng-hide="loading || loadError" data-ng-init="showFullNarrative=[]" data-ng-repeat="profile in profiles">
    <div class="menu detailed">
        <img data-ng-show="profile.PhotoURL" data-ng-src="{{profile.PhotoURL}}" alt="" class="research-photo" width="80" height="80">
        <h1 class="research-header">{{profile.Name}}</h1>
        <ol data-ng-show="profile.Narrative">
            <li>
                <a href="" data-ng-init="showFullNarrative[$index]=false" data-ng-click="showFullNarrative[$index]=!showFullNarrative[$index]">
                    <span class="research-narrative" data-ng-hide="showFullNarrative[$index]">{{profile.Narrative.substring(0, profile.Narrative.substring(0, 200).lastIndexOf(' '))}}&hellip;</span>
                    <span class="research-narrative" data-ng-show="showFullNarrative[$index]">{{profile.Narrative}}</span>
                </a>
            </li>
        </ol>
    </div>
    <div class="content" data-ng-show="profile.Keywords">
        <h1 class="light">Research Interests</h1>
        <ol class="research-interests">
            <li data-ng-repeat="keyword in profile.Keywords">{{keyword}}</li>
        </ol>
    </div>
    <div class="menu detailed" data-ng-show="profile.Publications">
        <h1 class="content-first light">Publications</h1>
        <ol>
            <li data-ng-repeat="publication in profile.Publications" data-ng-show="publication.PublicationTitle">
                <p data-ng-hide="publication.PublicationSource[0].PublicationSourceURL">
                    <span class="smallprint">{{publication.PublicationTitle}}</span>
                </p>
                <a data-ng-show="publication.PublicationSource[0].PublicationSourceURL" href="{{publication.PublicationSource[0].PublicationSourceURL}}" rel="external">
                    <span class="smallprint">{{publication.PublicationTitle}}</span>
                </a>
            </li>
        </ol>
    </div>
    <div class="menu" data-ng-show="profile.ProfilesURL">
        <ol>
            <li>
                <a href="{{profile.ProfilesURL}}" rel="external">Full Research Profile</a>
            </li>
        </ol>
    </div>
</div>
<div data-ng-show="loadError" class="content">
  <p class="info">An error occurred. Please <a href="" data-ng-click="load()">try again</a>.</p>
</div>
