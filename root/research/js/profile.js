var ucsf=ucsf||{};ucsf.ctsiProfile={renderProfile:function(e){"use strict";if(e.hasOwnProperty("Profiles")&&e.Profiles instanceof Array&&e.Profiles.length>0){var t,n,a,o,r,i,l,s,c,m,d,u,h,p,g,f,y,v,b,w,k,E,_,P=e.Profiles[0],I=document.getElementById("ctsi-menu"),z=document.getElementById("ctsi-header");if(P.hasOwnProperty("Name")&&(z.innerHTML=P.Name,P.hasOwnProperty("PhotoURL")&&(n=document.createElement("img"),n.setAttribute("src","http://src.sencha.io/80/80/"+P.PhotoURL),n.setAttribute("alt",""),n.setAttribute("style","border-top-right-radius:0;border-bottom-left-radius:.5em;float:left"),a=z.clientHeight,z.setAttribute("style","height:52px;padding-top:20px"),I.insertBefore(n,z))),P.hasOwnProperty("Narrative")&&"string"==typeof P.Narrative&&(t=document.createElement("ol"),I.appendChild(t),o=document.createElement("li"),r=document.createElement("a"),r.setAttribute("href","#"),r.setAttribute("onclick","ucsf.ctsiProfile.toggleNarrative(); return false;"),i=document.createElement("span"),i.setAttribute("class","smallprint"),i.setAttribute("id","ctsi-narrative"),l=P.Narrative.substring(0,P.Narrative.substring(0,200).lastIndexOf(" ")),i.innerHTML=l+"...",document.getElementById("ctsi-narrative-hidden").innerHTML=P.Narrative,r.appendChild(i),o.appendChild(r),t.appendChild(o),n.setAttribute("style","border-top-right-radius:0;float:left")),P.hasOwnProperty("Keywords")&&P.Keywords.length>0){for(s=P.Keywords,c=document.createElement("ol"),m=s.length>5?5:s.length,d=0;m>d;d+=1)u=document.createElement("li"),u.innerHTML=s[d],c.appendChild(u);h=document.getElementById("ctsi-keywords"),h.innerHTML='<h1 class="content-first light">Research Interests</h1>',h.appendChild(c)}if(P.hasOwnProperty("Publications")&&P.Publications.length>0){for(p=P.Publications,g=document.createElement("ol"),f=p.length>5?5:p.length,y=0;f>y;y+=1)p[y].hasOwnProperty("PublicationTitle")&&(v=document.createElement("li"),b=document.createElement("span"),b.setAttribute("class","smallprint"),b.innerHTML=p[y].PublicationTitle,p[y].hasOwnProperty("PublicationSource")&&p[y].PublicationSource[0].hasOwnProperty("PublicationSourceURL")&&p[y].PublicationSource[0].PublicationSourceURL.length>0?(w=document.createElement("a"),w.setAttribute("href",p[y].PublicationSource[0].PublicationSourceURL),w.setAttribute("rel","external")):w=document.createElement("p"),w.appendChild(b),v.appendChild(w),g.appendChild(v));k=document.getElementById("ctsi-publications"),k.innerHTML='<h1 class="content-first light">Recent Publications</h1>',k.appendChild(g)}P.hasOwnProperty("ProfilesURL")&&(E=document.createElement("li"),_=document.createElement("a"),_.innerHTML="Full Research Profile",_.setAttribute("rel","external"),_.setAttribute("href",P.ProfilesURL),document.getElementById("ctsi-full-profile"),E.appendChild(_),document.getElementById("ctsi-full-profile").appendChild(E))}},toggleNarrative:function(){"use strict";var e=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML,document.getElementById("ctsi-narrative-hidden").innerHTML=e}},window.location.search&&(window.onload=function(){"use strict";var e,t,n=decodeURIComponent(window.location.search),a=n.match(/[&?]fno=([\w.@]+)/);null!==a&&(e=a[1],t=document.createElement("script"),t.src="http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+e+"&callback=ucsf.ctsiProfile.renderProfile&publications=full&mobile=on",document.body.appendChild(t))});