var ucsf=ucsf||{};ucsf.ctsiProfile={renderProfile:function(e){"use strict";if(e.hasOwnProperty("Profiles")&&e.Profiles instanceof Array&&e.Profiles.length>0){var t,n,a,r,o,i,s,l,c,d,m,u,f,p,h,g,b,v,y,_,w,P,E,k=e.Profiles[0],T=document.getElementById("ctsi-menu"),I=document.getElementById("ctsi-header");if(k.hasOwnProperty("Name")){I.innerHTML=k.Name;if(k.hasOwnProperty("PhotoURL")){n=document.createElement("img");n.setAttribute("src","http://src.sencha.io/80/80/"+k.PhotoURL);n.setAttribute("alt","");n.setAttribute("style","border-top-right-radius:0;border-bottom-left-radius:.5em;float:left");a=I.clientHeight;I.setAttribute("style","height:52px;padding-top:20px");T.insertBefore(n,I)}}if(k.hasOwnProperty("Narrative")&&"string"==typeof k.Narrative){t=document.createElement("ol");T.appendChild(t);r=document.createElement("li");o=document.createElement("a");o.setAttribute("href","#");o.setAttribute("onclick","ucsf.ctsiProfile.toggleNarrative(); return false;");i=document.createElement("span");i.setAttribute("class","smallprint");i.setAttribute("id","ctsi-narrative");s=k.Narrative.substring(0,k.Narrative.substring(0,200).lastIndexOf(" "));i.innerHTML=s+"...";document.getElementById("ctsi-narrative-hidden").innerHTML=k.Narrative;o.appendChild(i);r.appendChild(o);t.appendChild(r);n.setAttribute("style","border-top-right-radius:0;float:left")}if(k.hasOwnProperty("Keywords")&&k.Keywords.length>0){l=k.Keywords;c=document.createElement("ol");d=l.length>5?5:l.length;for(m=0;d>m;m+=1){u=document.createElement("li");u.innerHTML=l[m];c.appendChild(u)}f=document.getElementById("ctsi-keywords");f.innerHTML='<h1 class="content-first light">Research Interests</h1>';f.appendChild(c)}if(k.hasOwnProperty("Publications")&&k.Publications.length>0){p=k.Publications;h=document.createElement("ol");g=p.length>5?5:p.length;for(b=0;g>b;b+=1)if(p[b].hasOwnProperty("PublicationTitle")){v=document.createElement("li");y=document.createElement("span");y.setAttribute("class","smallprint");y.innerHTML=p[b].PublicationTitle;if(p[b].hasOwnProperty("PublicationSource")&&p[b].PublicationSource[0].hasOwnProperty("PublicationSourceURL")&&p[b].PublicationSource[0].PublicationSourceURL.length>0){_=document.createElement("a");_.setAttribute("href",p[b].PublicationSource[0].PublicationSourceURL);_.setAttribute("rel","external")}else _=document.createElement("p");_.appendChild(y);v.appendChild(_);h.appendChild(v)}w=document.getElementById("ctsi-publications");w.innerHTML='<h1 class="content-first light">Recent Publications</h1>';w.appendChild(h)}if(k.hasOwnProperty("ProfilesURL")){P=document.createElement("li");E=document.createElement("a");E.innerHTML="Full Research Profile";E.setAttribute("rel","external");E.setAttribute("href",k.ProfilesURL);document.getElementById("ctsi-full-profile");P.appendChild(E);document.getElementById("ctsi-full-profile").appendChild(P)}}},toggleNarrative:function(){"use strict";var e=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML;document.getElementById("ctsi-narrative-hidden").innerHTML=e}};window.location.search&&(window.onload=function(){"use strict";var e,t,n=decodeURIComponent(window.location.search),a=n.match(/[&?]fno=([\w.@]+)/);if(null!==a){e=a[1];t=document.createElement("script");t.src="http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+e+"&callback=ucsf.ctsiProfile.renderProfile&publications=full&mobile=on";document.body.appendChild(t)}});