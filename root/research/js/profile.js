var ucsf=ucsf||{};ucsf.ctsiProfile={renderProfile:function(e){"use strict";if(e.hasOwnProperty("Profiles")&&e.Profiles instanceof Array&&e.Profiles.length>0){var t,n,a,o,r,i,l,s,c,d,m,u,p,h,f,g,v,b,y,w,k,_,E,P=e.Profiles[0],I=document.getElementById("ctsi-menu"),M=document.getElementById("ctsi-header");if(P.hasOwnProperty("Name")&&(M.innerHTML=P.Name,P.hasOwnProperty("PhotoURL")&&(n=document.createElement("img"),n.setAttribute("src","http://src.sencha.io/80/80/"+P.PhotoURL),n.setAttribute("alt",""),n.setAttribute("style","border-top-right-radius:0;border-bottom-left-radius:.5em;float:left"),a=M.clientHeight,M.setAttribute("style","height:52px;padding-top:20px"),I.insertBefore(n,M))),P.hasOwnProperty("Narrative")&&"string"==typeof P.Narrative&&(t=document.createElement("ol"),I.appendChild(t),o=document.createElement("li"),r=document.createElement("a"),r.setAttribute("href","#"),r.setAttribute("onclick","ucsf.ctsiProfile.toggleNarrative(); return false;"),i=document.createElement("span"),i.setAttribute("class","smallprint"),i.setAttribute("id","ctsi-narrative"),l=P.Narrative.substring(0,P.Narrative.substring(0,200).lastIndexOf(" ")),i.innerHTML=l+"...",document.getElementById("ctsi-narrative-hidden").innerHTML=P.Narrative,r.appendChild(i),o.appendChild(r),t.appendChild(o),n.setAttribute("style","border-top-right-radius:0;float:left")),P.hasOwnProperty("Keywords")&&P.Keywords.length>0){for(s=P.Keywords,c=document.createElement("ol"),d=s.length>5?5:s.length,m=0;d>m;m+=1)u=document.createElement("li"),u.innerHTML=s[m],c.appendChild(u);p=document.getElementById("ctsi-keywords"),p.innerHTML='<h1 class="content-first light">Research Interests</h1>',p.appendChild(c)}if(P.hasOwnProperty("Publications")&&P.Publications.length>0){for(h=P.Publications,f=document.createElement("ol"),g=h.length>5?5:h.length,v=0;g>v;v+=1)h[v].hasOwnProperty("PublicationTitle")&&(b=document.createElement("li"),y=document.createElement("span"),y.setAttribute("class","smallprint"),y.innerHTML=h[v].PublicationTitle,h[v].hasOwnProperty("PublicationSource")&&h[v].PublicationSource[0].hasOwnProperty("PublicationSourceURL")&&h[v].PublicationSource[0].PublicationSourceURL.length>0?(w=document.createElement("a"),w.setAttribute("href",h[v].PublicationSource[0].PublicationSourceURL),w.setAttribute("rel","external")):w=document.createElement("p"),w.appendChild(y),b.appendChild(w),f.appendChild(b));k=document.getElementById("ctsi-publications"),k.innerHTML='<h1 class="content-first light">Recent Publications</h1>',k.appendChild(f)}P.hasOwnProperty("ProfilesURL")&&(_=document.createElement("li"),E=document.createElement("a"),E.innerHTML="Full Research Profile",E.setAttribute("rel","external"),E.setAttribute("href",P.ProfilesURL),document.getElementById("ctsi-full-profile"),_.appendChild(E),document.getElementById("ctsi-full-profile").appendChild(_))}},toggleNarrative:function(){"use strict";var e=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML,document.getElementById("ctsi-narrative-hidden").innerHTML=e}},window.location.search&&(window.onload=function(){"use strict";var e,t,n=decodeURIComponent(window.location.search),a=n.match(/[&?]fno=([\w.@]+)/);null!==a&&(e=a[1],t=document.createElement("script"),t.src="http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+e+"&callback=ucsf.ctsiProfile.renderProfile&publications=full&mobile=on",document.body.appendChild(t))});