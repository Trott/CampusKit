var ucsf=ucsf||{};ucsf.ctsiProfile={renderProfile:function(e){"use strict";if(e.hasOwnProperty("Profiles")&&e.Profiles instanceof Array&&e.Profiles.length>0){var t,n,o,a,i,r,s,l,u,c,d,m,p,f,h,v,g,b,y,w,S,T,I,_=e.Profiles[0],P=document.getElementById("ctsi-menu"),k=document.getElementById("ctsi-header");if(_.hasOwnProperty("Name")){k.innerHTML=_.Name;if(_.hasOwnProperty("PhotoURL")){n=document.createElement("img");n.setAttribute("src","http://src.sencha.io/80/80/"+_.PhotoURL);n.setAttribute("alt","");n.setAttribute("style","border-top-right-radius:0;border-bottom-left-radius:.5em;float:left");o=k.clientHeight;k.setAttribute("style","height:52px;padding-top:20px");P.insertBefore(n,k)}}if(_.hasOwnProperty("Narrative")&&"string"==typeof _.Narrative){t=document.createElement("ol");P.appendChild(t);a=document.createElement("li");i=document.createElement("a");i.setAttribute("href","#");i.setAttribute("onclick","ucsf.ctsiProfile.toggleNarrative(); return false;");r=document.createElement("span");r.setAttribute("class","smallprint");r.setAttribute("id","ctsi-narrative");s=_.Narrative.substring(0,_.Narrative.substring(0,200).lastIndexOf(" "));r.innerHTML=s+"...";document.getElementById("ctsi-narrative-hidden").innerHTML=_.Narrative;i.appendChild(r);a.appendChild(i);t.appendChild(a);n.setAttribute("style","border-top-right-radius:0;float:left")}if(_.hasOwnProperty("Keywords")&&_.Keywords.length>0){l=_.Keywords;u=document.createElement("ol");c=l.length>5?5:l.length;for(d=0;c>d;d+=1){m=document.createElement("li");m.innerHTML=l[d];u.appendChild(m)}p=document.getElementById("ctsi-keywords");p.innerHTML='<h1 class="content-first light">Research Interests</h1>';p.appendChild(u)}if(_.hasOwnProperty("Publications")&&_.Publications.length>0){f=_.Publications;h=document.createElement("ol");v=f.length>5?5:f.length;for(g=0;v>g;g+=1)if(f[g].hasOwnProperty("PublicationTitle")){b=document.createElement("li");y=document.createElement("span");y.setAttribute("class","smallprint");y.innerHTML=f[g].PublicationTitle;if(f[g].hasOwnProperty("PublicationSource")&&f[g].PublicationSource[0].hasOwnProperty("PublicationSourceURL")&&f[g].PublicationSource[0].PublicationSourceURL.length>0){w=document.createElement("a");w.setAttribute("href",f[g].PublicationSource[0].PublicationSourceURL);w.setAttribute("rel","external")}else w=document.createElement("p");w.appendChild(y);b.appendChild(w);h.appendChild(b)}S=document.getElementById("ctsi-publications");S.innerHTML='<h1 class="content-first light">Recent Publications</h1>';S.appendChild(h)}if(_.hasOwnProperty("ProfilesURL")){T=document.createElement("li");I=document.createElement("a");I.innerHTML="Full Research Profile";I.setAttribute("rel","external");I.setAttribute("href",_.ProfilesURL);document.getElementById("ctsi-full-profile");T.appendChild(I);document.getElementById("ctsi-full-profile").appendChild(T)}}},toggleNarrative:function(){"use strict";var e=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML;document.getElementById("ctsi-narrative-hidden").innerHTML=e}};window.location.search&&(window.onload=function(){"use strict";var e,t,n=decodeURIComponent(window.location.search),o=n.match(/[&?]fno=([\w.@]+)/);if(null!==o){e=o[1];t=document.createElement("script");t.src="http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+e+"&callback=ucsf.ctsiProfile.renderProfile&publications=full&mobile=on";document.body.appendChild(t)}});